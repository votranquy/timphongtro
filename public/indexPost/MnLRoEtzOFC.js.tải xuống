if (self.CavalryLogger) { CavalryLogger.start_js(["A66ak"]); }

__d("SavePluginClientSideActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:SavePluginClientSideActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:SavePluginClientSideActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SavePluginClientSideActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setIsSDK=function(a){this.$1.is_sdk=a;return this};a.prototype.setPluginAppID=function(a){this.$1.plugin_app_id=a;return this};a.prototype.setPluginURI=function(a){this.$1.plugin_uri=a;return this};a.prototype.setRefererURL=function(a){this.$1.referer_url=a;return this};a.prototype.setSaveCategory=function(a){this.$1.save_category=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={action:!0,is_sdk:!0,plugin_app_id:!0,plugin_uri:!0,referer_url:!0,save_category:!0,time:!0,weight:!0};e.exports=a}),null);
__d("PluginSaveClientSideAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPTIN_CLICK:"optin_click"})}),null);
__d("PluginSave",["invariant","Arbiter","CSS","DOM","Event","Form","FormSubmit","PluginOptin","PluginSaveClientSideAction","SavePluginClientSideActionsTypedLogger","UnverifiedXD","URI"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();this.$1=a;this.$2=c;this.$3=d;this.$4=e;this.$6=f;this.$7=l;this.$9=m;this.$11=o;a="save_"+j;if(g){this.$8=b("DOM").find(this.$3,'input[type="hidden"][name="save_action"]');c=new(b("URI"))(window.location.search).getQueryData();c.act===a&&h&&(this.submit(),this.$2||setTimeout(function(){b("Event").fire(this.$1,"toggle")}.bind(this),0));this.$9?b("Event").listen(this.$3,"click",function(a){return this.submit()}.bind(this)):b("Event").listen(this.$3,"submit",function(a){return this.submit()}.bind(this));b("Event").listen(this.$3,"error",function(a){this.toggleSaveStatus()}.bind(this));b("Arbiter").subscribe("saveConfirmed",function(){b("DOM").remove(b("DOM").find(document.getElementsByTagName("body")[0],".confirm_button")),b("CSS").show(this.$3)}.bind(this))}else{var p=new(b("PluginOptin"))("save").addReturnParams({act:a});b("Event").listen(this.$3,"submit",function(a){new(b("SavePluginClientSideActionsTypedLogger"))().setPluginAppID(i).setPluginURI(j).setSaveCategory(k).setRefererURL(n).setIsSDK(b("DOM").find(this.$3,'input[type="hidden"][name="xfbml"]').value==="1").setAction(b("PluginSaveClientSideAction").OPTIN_CLICK).log();p.start.bind(p)();this.fireOnClickPixel();return!1}.bind(this))}}a.prototype.toggleSaveStatus=function(){"use strict";this.$6=!this.$6,this.$2&&(b("CSS").conditionShow(b("DOM").find(this.$1,".save_button"),!this.$6),b("CSS").conditionShow(b("DOM").find(this.$1,".unsave_button"),this.$6)),this.$8.value=this.$6?"":"1"};a.prototype.submit=function(){"use strict";this.$10!=null&&this.$9&&(this.$10.clearStatusIndicator(),this.$10!=null||g(0,5415),this.$10.abort());this.$10=b("FormSubmit").send(this.$3);this.$9&&b("Form").setDisabled(this.$3,!1);b("Event").listen(this.$3,"success",function(a){a.data.response.payload.status!=="VALID"&&this.hideOverlay()}.bind(this));this.toggleSaveStatus();this.$6?(this.showOverlay(),this.fireOnClickPixel()):this.hideOverlay();return!1};a.prototype.showOverlay=function(){"use strict";__p&&__p();if(this.$4==null)return;if(this.$5&&this.$5.name){b("UnverifiedXD").send({type:"savePluginShowIframe"});return}var a=this.$4.cloneNode(!0),c=document.getElementsByTagName("head")[0],d=b("DOM").create("div");b("DOM").scry(c,'link[type="text/css"]').forEach(function(a){return b("DOM").appendContent(d,a.cloneNode())});b("DOM").scry(c,"style").forEach(function(a){var c=document.createElement("style");a=a.textContent;c.styleSheet?c.styleSheet.cssText=a:b("DOM").appendContent(c,a);b("DOM").appendContent(d,c)});b("DOM").appendContent(d,a);c=this.$7?{"border-radius":"7px","box-shadow":"0 4px 16px rgba(0,0,0,.4)"}:{"border-radius":"7px","box-shadow":"rgba(0,0,0,.4) 0 2px 8px, 0 0 0 1px rgba(0,0,0,.2)"};b("UnverifiedXD").send({type:"savePluginGetBlankIframe",isHTTPS:window.location.protocol==="https:",fromIframe:window.name,data:JSON.stringify({classList:["fb_animate"],style:c,width:300,height:115})});b("Arbiter").subscribeOnce("blankIframeAck",function(a,c){this.$5=c;b("DOM").appendContent(c.document.body,d);a=b("DOM").find(c.document.body,".close_button");b("Event").listen(a,"click",function(a){return this.hideOverlay()}.bind(this));this.showOverlay()}.bind(this))};a.prototype.hideOverlay=function(){"use strict";if(this.$4==null)return;b("UnverifiedXD").send({type:"savePluginHideIframe"})};a.prototype.fireOnClickPixel=function(){"use strict";this.$11!=null&&window.fbq&&window.fbq("track",this.$11)};e.exports=a}),null);